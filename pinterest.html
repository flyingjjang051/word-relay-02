<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>corona</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet" />
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/fancybox.css" />
    <link rel="stylesheet" href="css/lightpick.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/pinterest.css" />
    <script src="https://kit.fontawesome.com/08ebc00fc6.js" crossorigin="anonymous"></script>
    <script src="js/gsap/gsap.min.js"></script>
    <script src="js/gsap/ScrollToPlugin.min.js"></script>
    <script src="js/splitting.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/hangul-tools.js"></script>
    <script src="js/fancybox.umd.js"></script>
    <script src="js/jquery-3.6.1.min.js"></script>
    <script src="js/chart.min.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/lightpick.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/imagesloaded.pkgd.min.js"></script>
  </head>
  <body>
    <header id="header">
      <h1>portfolio <strong>gallery</strong></h1>
    </header>

    <div class="category">
      <ul>
        <li class="on" data-filter="item">all</li>
        <li data-filter="paint">paint</li>
        <li data-filter="sketch">sketch</li>
        <li data-filter="photo">photo</li>
      </ul>
    </div>

    <div class="list">
      <ul class="item-list">
        <!-- <li>
          <a href="">
            <div class="img"><img src="images/01.jpg" alt="" /></div>
            <div class="info">
              <h2>제목 들어갑니다.</h2>
              <p class="desc">내용이 들어갑니다.</p>
              <p class="point">점수 들어갑니다.</p>
            </div>
          </a>
        </li> -->
      </ul>
    </div>
    <script>
      $.ajax({ url: "data/portfolio.json" })
        .done(function (response) {
          console.log(response);
          const typoList = response.typoList;
          let listHtml = "";
          $.each(typoList, function (idx, item) {
            listHtml += `<li class="item ${item.category}">
                        <a href="">
                          <div class="img"><img src="images/${item.img}" alt="" /></div>
                          <div class="info">
                            <h2>${item.title}</h2>
                            <p class="desc">${item.desc}</p>
                            <p class="category">#${item.category}</p>
                            <p class="point">${item.point}</p>
                          </div>
                        </a>
                      </li>`;
          });
          $(".list ul").html(listHtml); // tag를 만들어서 끼워 넣은 상태 이미지가 아직 완전히 로딩이 되었다는걸 보장못함

          const grid = $(".item-list").isotope({
            itemSelector: ".item",
            layoutMode: "masonry",
          });
          grid.imagesLoaded().progress(function () {
            grid.isotope("layout");
          });

          $(".category ul li").on("click", function () {
            $(this).addClass("on").siblings().removeClass("on");
            const filterWord = $(this).data("filter");
            grid.isotope({ filter: `.${filterWord}` });
          });

          // const gridAll = $(".item-list").imagesLoaded(function () {
          //   // init Isotope after all images have loaded
          //   gridAll.isotope({
          //     itemSelector: ".item",
          //     layoutMode: "masonry",
          //   });
          // });
        })
        .fail(function (error) {
          console.log(error);
        });
    </script>
  </body>
</html>
